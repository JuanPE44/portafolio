---
import IconWork from "src/icons/IconWork.astro";
import IconRowRigth from "src/icons/IconRowRigth.astro";
import IconGithub from "src/icons/IconGithub.astro";
import IconLinkedin from "src/icons/IconLinkedin.astro";
import HeroIcon from "./HeroIcon.astro";
import ContainerSection from "@components/ui/ContainerSection.astro";
import CardHero from "./CardHero.astro";
import ListOfHabilities from "./ListOfHabilities.astro";
import ListOfTechnologies from "./ListOfTechnologies.astro";
import { Image } from "astro:assets";
---

<ContainerSection className="py-0" id="hero">
  <div class="w-full flex flex-col sm:flex-row min-h-screen relative">
    <div
      class="hidden sm:flex w-96 h-96 bg-gradient-to-r -bottom-1/3 from-primary to-secondary opacity-25 sm:opacity-15 blur-3xl absolute left-1/2 transform -translate-x-1/2 rounded-full -z-10"
    >
    </div>
    <div
      class="w-full sm:w-1/2 pt-28 pb-40 sm:pb-0 sm:pt-0 min-h-screen flex flex-col gap-16 sm:gap-10 sm:justify-center relative"
    >
      <div
        class="sm:hidden w-96 h-96 bg-gradient-to-r -bottom-1/3 from-primary to-secondary opacity-25 sm:opacity-15 blur-3xl absolute left-1/2 transform -translate-x-1/2 rounded-full -z-10"
      >
      </div>
      <div class="flex flex-col gap-4">
        <p class="text-zinc-300 text-sm md:text-base italic">
          Llevando tus proyectos web al siguiente nivel
        </p>
        <div class="flex flex-col gap-3">
          <h1
            class="text-white text-5xl sm:text-3xl md:text-4xl lg:text-5xl font-bold"
          >
            Desarrollador Frontend <span class="text-primary">React</span> & <span
              class="text-primary">Typescript</span
            >
          </h1>
          <h2 class="text-gray text-base sm:text-base lg:text-lg">
            Soy Juan. Diseño y programo experiencias web simples, funcionales y
            hermosas.
          </h2>
        </div>
      </div>
      <div class="flex flex-col gap-3">
        <div class="flex flex-col sm:flex-row gap-4 sm:gap-3">
          <a
            href="/#works"
            class="bg-secondary text-bg justify-center font-bold py-2 px-4 rounded-2xl flex gap-2 items-center hover:scale-105 hover:shadow-lg transition-[0.3s]"
          >
            <IconWork />
            <span>Trabajos</span>
          </a>

          <a
            href="/services"
            class="border border-white text-white justify-center flex items-center font-bold py-2 px-4 rounded-2xl hover:scale-105 hover:shadow-lg transition-[0.3s]"
            >Servicios</a
          >
        </div>
        <div class="flex justify-center fixed bottom-8 left-0 w-full">
          <div
            id="fadeElement"
            class="p-1 border-2 sm:border border-[#fff5] rounded-full animate-bounce filter backdrop-blur-2xl z-50"
          >
            <a
              href="/#experience"
              class="cursor-pointer"
              aria-label="Ir a experiencia"
            >
              <IconRowRigth
                width="35"
                height="35"
                className="rotate-90 stroke-[#fff5] stroke-2 sm:stroke-1"
              />
            </a>
          </div>
        </div>
      </div>
    </div>

    <div
      class="w-full py-36 sm:py-0 sm:w-1/2 sm:min-h-screen flex justify-center items-center"
    >
      <div class="relative">
        <!-- Card habilidades -->

        <CardHero
          className="-top-[60%] -left-[15%] sm:-top-[40%] sm:-left-[10%]  md:-left-1/4 md:-top-[40%] lg:-left-1/2 lg:-top-[35%]"
          title="Habilidades"
        >
          <ListOfHabilities />
        </CardHero>

        <!-- Card Github -->
        <HeroIcon
          url="https://github.com/JuanPE44"
          className="-top-[15%] -right-[15%]"
        >
          <IconGithub width="35" height="35" />
        </HeroIcon>
        <Image
          alt="imagen hero"
          src="/images/foto-hero.webp"
          width="240"
          height="208"
          class="rounded-2xl w-60 h-52 object-cover"
        />

        <!-- Card Linkedin -->
        <HeroIcon
          url="https://www.linkedin.com/in/juan-peñalba-0025b6246/"
          className=" -bottom-[15%] -left-[15%] "
        >
          <IconLinkedin width="35" height="35" />
        </HeroIcon>

        <!-- Card Tecnologicas -->
        <CardHero
          className="card-hero2 -bottom-[60%] -right-[19%] sm:-bottom-[45%] sm:-right-[20%] md:-bottom-[40%] md:-right-1/3 lg:-right-[43%]"
          title="Mis tecnologías preferidas"
        >
          <ListOfTechnologies />
        </CardHero>
      </div>
    </div>
  </div>
</ContainerSection>

<script>
  const handleScroll = () => {
    const element = document.getElementById("fadeElement");
    if (!element) return;

    const scrollY = window.scrollY;
    const maxFadePoint = 300; // Punto en el que la opacidad llega a 0
    const opacity = Math.max(1 - scrollY / maxFadePoint, 0);

    element.style.opacity = opacity.toString();

    if (scrollY > maxFadePoint) {
      element.style.display = "none";
    } else {
      element.style.display = "block";
    }
  };

  if (typeof window !== "undefined") {
    window.addEventListener("scroll", handleScroll);
  }
</script>
